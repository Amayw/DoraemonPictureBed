{"version":3,"sources":["assets/7.jpg","components/Uploader.js","assets/1.jpg","components/PleaseLogin.js","views/Home.js"],"names":["Dragger","Upload","UploaderWrapper","styled","div","Uploader","observer","widthRef","useRef","heightRef","useStores","ImageStore","UserStore","store","useLocalStore","width","setWidth","value","height","setHeight","serverFile","attributes","url","widthStr","heightStr","props","showUploadList","beforeUpload","file","setFile","setFileName","name","currentUser","message","warning","test","type","size","error","addImage","then","info","err","className","tip","spinning","isUploading","src","pic","alt","InboxOutlined","target","rel","href","filename","ref","onChange","current","placeholder","fullStr","PleaseLogin","to","Home","AuthStore","useEffect","pullUser"],"mappings":"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","file":"static/js/9.521248d1.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/7.9d369aa0.jpg\";","import React, {useRef} from 'react';\nimport styled from 'styled-components';\nimport {useStores} from '../stores';\nimport {observer,useLocalStore} from 'mobx-react';\nimport {Upload,message,Spin} from 'antd';\nimport {InboxOutlined} from '@ant-design/icons';\nimport pic from '../assets/7.jpg';\n\nconst {Dragger} = Upload;\n\nconst UploaderWrapper = styled.div`\n       display: flex;\n       flex-direction: column;\n       align-items: center;\n       justify-content: center;\n       >.uploadLeft{\n          margin: 30px 0;\n          position: relative;\n            >img{\n              width: 400px;\n               }\n            >span{\n                  position: absolute; \n                  top: 70%;\n                  left: 50%;\n                  transform: translateX(-50%);\n                  >.ant-upload.ant-upload-drag .ant-upload{\n                    padding: 0 30px;\n                  }\n                  >.ant-upload.ant-upload-drag p.ant-upload-text{\n                    position: absolute;\n                    top: -386%;\n                    color:#394460;\n                    margin: 0;\n                    padding: 0;\n                    width: 200px;\n                    left: 50%;\n                    transform: translateX(-50%);\n                  }\n                  >.ant-upload{\n                    //padding: 0;\n                    background-color: transparent;\n                  }\n                  >.ant-upload.ant-upload-drag p.ant-upload-drag-icon{\n                    margin-bottom: 0;\n                  }\n                  >.ant-upload.ant-upload-drag p.ant-upload-drag-icon .anticon{\n                    color:#1890ff;\n                  }\n               }\n       }\n       >.resultDisplay{\n            border-radius: 8px;\n            border: 1px dashed #ccc;\n            padding: 30px 60px;\n            display: flex;\n            flex-direction: column;\n            >h1{\n               text-align: center;\n               color:#394460;\n            }\n            .item{\n               display: flex;\n               margin-bottom: 10px;\n               >span{\n               color:#394460;\n               margin-right: 10px;\n               font-weight: bold;\n               }\n               >img{\n               max-width: 600px;\n               padding-top: 10px;\n               @media (max-width: 700px){\n                 max-width: 300px;\n               }\n               }\n               \n               >div{\n                 &.inputGroup{\n                   display: flex;\n                   flex-direction: column;\n                       >input{\n                        border:1px solid #ccc;\n                        border-radius: 2px;\n                        color: #666;\n                           &.inputTop{\n                           margin-bottom: 4px;\n                           }\n                       }\n                 }\n               }\n               \n               \n            }\n          }\n`;\n\n\nconst Uploader = observer(() => {\n    const widthRef = useRef();\n    const heightRef = useRef();\n    const {ImageStore,UserStore} = useStores();\n    const store = useLocalStore(() => ({\n        width: null,\n        setWidth(value) {\n            store.width = value;\n        },\n        get widthStr() {\n            return store.width ? `/w/${store.width}` : '';\n        },\n        height: null,\n        setHeight(value) {\n            store.height = value;\n        },\n        get heightStr() {\n            return store.height ? `/h/${store.height}` : '';\n        },\n        get fullStr() {\n            return ImageStore.serverFile.attributes.url.attributes.url + '?imageView2/0' + store.widthStr + store.heightStr;\n        }\n\n    }));\n\n    const changeWidth = () => {\n        store.setWidth(widthRef.current.value);\n    };\n    const changeHeight = () => {\n        store.setHeight(heightRef.current.value);\n    };\n\n    const props = {\n        showUploadList: false,\n        beforeUpload: file => {\n            ImageStore.serverFile=null;\n            ImageStore.setFile(file);\n            ImageStore.setFileName(file.name);\n            if(UserStore.currentUser===null){\n                message.warning('请先登录再上传！')\n                return false;\n            }\n            if(!(/(svg$)|(jpg$)|(png$)|(jpeg$)|(gif$)/ig.test(file.type))){\n                message.error('只能上传svg/jpg/jpeg/png/gif格式的图片！');\n                return false;\n            }\n\n            if(file.size>1024*1024){\n                message.error('图片最大1M！');\n                return false;\n            }\n\n            ImageStore.addImage().then((serverFile) => {\n                message.info('上传成功！');\n                }, (err) => {\n                message.error('上传失败！');\n                }\n            );\n            return false;\n        }\n    };\n\n    return (\n        <UploaderWrapper>\n            <div className=\"uploadLeft\">\n                <Spin tip=\"上传中\" spinning={ImageStore.isUploading}>\n                <img src={pic} alt=\"哆啦A梦\"/>\n                </Spin>\n                    <Dragger {...props}>\n                        <p className=\"ant-upload-drag-icon\">\n                            <InboxOutlined/>\n                        </p>\n                        <p className=\"ant-upload-text\"><strong>点击</strong>或<strong>拖拽文件</strong>到我<strong>嘴巴</strong>里</p>\n                    </Dragger>\n            </div>\n            {ImageStore.serverFile?(\n                <div className=\"resultDisplay\">\n                    <h1>上传结果</h1>\n                    <div className=\"item\">\n                        <span>线上地址</span>\n                        <div><a target=\"_blank\" rel=\"noreferrer\"\n                                href={ImageStore.serverFile.attributes.url.attributes.url}>\n                            {ImageStore.serverFile.attributes.url.attributes.url}\n                        </a></div>\n                    </div>\n                    <div className=\"item\">\n                        <span>文件名称</span>\n                        <span>{ImageStore.filename}</span>\n                    </div>\n                    <div className=\"item\">\n                        <span>图片预览</span>\n                        <img  alt=\"上传图片展示\" src={ImageStore.serverFile.attributes.url.attributes.url}/>\n                    </div>\n                    <div className=\"item\">\n                        <span>更多尺寸</span>\n                        <div className=\"inputGroup\">\n                            <input ref={widthRef} onChange={changeWidth} className='inputTop' placeholder=\"最大宽度 (可选)\"/>\n                            <input ref={heightRef} onChange={changeHeight} placeholder=\"最大高度 (可选)\"/>\n                        </div>\n                    </div>\n                    <div className=\"item\">\n                        <span>重置地址</span>\n                        <div>\n                            <a target='_blank' rel=\"noreferrer\" href={store.fullStr}>{store.fullStr}</a>\n                        </div>\n                    </div>\n\n                </div>\n            ) : null}\n        </UploaderWrapper>\n    );\n});\n\nexport default Uploader;","export default __webpack_public_path__ + \"static/media/1.7318290e.jpg\";","import React from 'react'\nimport styled from 'styled-components';\nimport {NavLink} from 'react-router-dom';\nimport pic from '../assets/1.jpg'\n\nconst PleaseLogin=()=>{\n    const UploaderWrapper=styled.div`\n       //width: 80vw;\n       //height: 76vh;\n       display: flex;\n       flex-direction: column;\n       align-items: center;\n       justify-content: center;\n       >div{\n          color:#394460;\n          margin-bottom: 16px;\n          .linkA{\n            color:#ff7b89;\n          }\n       }\n`;\n\n    return (\n        <UploaderWrapper>\n            <div>\n                哆啦A梦友情提醒您，\n                请先<NavLink className=\"linkA\" to=\"/login\">登录</NavLink>\n            或者\n            <NavLink className=\"linkA\" to=\"/register\">注册</NavLink>哦\n            </div>\n            <img alt=\"哆啦A梦\" src={pic} />\n\n        </UploaderWrapper>\n    )\n}\n\nexport default PleaseLogin;","import React, {useEffect} from 'react';\nimport Uploader from '../components/Uploader';\nimport {useStores} from '../stores';\nimport PleaseLogin from '../components/PleaseLogin'\n\nfunction Home() {\n    const {AuthStore,UserStore}=useStores();\n    useEffect(()=>{\n        UserStore.pullUser();\n    },[])\n    return (\n        <>\n        {UserStore.currentUser?<Uploader/>:<PleaseLogin/>}\n        </>\n    );\n}\n\nexport default Home;"],"sourceRoot":""}