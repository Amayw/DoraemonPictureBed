(this.webpackJsonppicturebed=this.webpackJsonppicturebed||[]).push([[2],{125:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n.n(i),a=n(17),l=n.n(a),u=(n(99),n(45)),c=n(7),o=n(30),s=n(46),f=n(64),b=n(75),m=n(126),p=n.p+"static/media/smile.7f6eb629.png";function h(){var e=Object(u.a)(["\n    position: relative;\n    display:flex;\n    align-items: center;\n    justify-content: space-between;\n    background: #677097;\n    color: #f1f4fc;\n    padding: 10px 100px;\n    vertical-align: center;\n    >nav{\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        >img{\n        width: 30px;\n        height:30px;\n        margin-right: 20px;\n        }\n        >span{\n        font-weight: bold;\n        }\n        >ul{\n            display: flex;\n            margin: 0;\n            >li{\n                margin-left: 30px;\n                >a{\n                   color:#f1f4fc;\n                   &.active{\n                   font-weight: bold;\n                      color:#84c2f1;\n                   }\n                }\n\n            }\n        }\n    }\n    >.userRelated{\n          display: flex;\n          align-items: center;\n          >.rightButton{\n            margin-left: 20px;\n          }\n        }\n    @media (max-width: 800px){\n      padding: 20px 6px;\n      >nav{\n        >span{\n          display: none;\n        }\n        >img{\n           margin-right: 1px;\n        }\n        >ul{\n          >li{\n            margin-left: 0;\n            >a{\n              padding: 0 4px;\n            }\n          }\n        }\n      }\n      >.userRelated{\n        >button{\n          padding: 0 6px;\n          &.rightButton{\n            margin-left: 4px;\n          }\n        }\n      }\n    }\n\n"]);return h=function(){return e},e}var g=s.a.header(h()),j=Object(b.a)((function(){var e=Object(f.a)(),t=e.AuthStore,n=e.UserStore,a=new c.f;return Object(i.useEffect)((function(){n.pullUser()}),[]),r.a.createElement(g,null,r.a.createElement("nav",null,r.a.createElement("img",{src:p,alt:"logo"}),r.a.createElement("span",null,"Doraemon Picture Bed"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(o.b,{activeClassName:"active",to:"/",exact:!0},"\u9996\u9875")),r.a.createElement("li",null,r.a.createElement(o.b,{activeClassName:"active",to:"/history"},"\u4e0a\u4f20\u5386\u53f2")),r.a.createElement("li",null,r.a.createElement(o.b,{activeClassName:"active",to:"/about"},"\u5173\u4e8e\u6211")))),r.a.createElement("div",{className:"userRelated"},n.currentUser?r.a.createElement(r.a.Fragment,null,n.currentUser.attributes.username,r.a.createElement(m.a,{className:"rightButton",onClick:function(){t.logout(),a.push("/login")}},"\u6ce8\u9500")):r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{onClick:function(){a.push("/login")}},"\u767b\u5f55"),r.a.createElement(m.a,{onClick:function(){a.push("/register")},className:"rightButton"},"\u6ce8\u518c"))))}));function O(){var e=Object(u.a)(["\n    >span{\n      color: #84c2f1;\n    }\n  \n\n"]);return O=function(){return e},e}var d=s.a.div(O());var w=function(){return r.a.createElement(d,null,r.a.createElement("span",null,"\u563b\u563b~~~\u4f7f\u51fa\u5403\u94dc\u9523\u70e7\u7684\u52b2\u6765\u52a0\u8f7d~"))},v=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(6),n.e(9)]).then(n.bind(null,320))})),y=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(5),n.e(8)]).then(n.bind(null,321))})),E=Object(i.lazy)((function(){return n.e(7).then(n.bind(null,311))})),U=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(10)]).then(n.bind(null,312))})),z=Object(i.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,313))})),x=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(j,null),r.a.createElement("main",null,r.a.createElement(i.Suspense,{fallback:r.a.createElement(w,null)},r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/about"},r.a.createElement(E,null)),r.a.createElement(c.a,{path:"/history"},r.a.createElement(y,null)),r.a.createElement(c.a,{path:"/login"},r.a.createElement(U,null)),r.a.createElement(c.a,{path:"/register"},r.a.createElement(z,null)),r.a.createElement(c.a,{path:"/",exact:!0},r.a.createElement(v,null))))))},L=function(e){e&&e instanceof Function&&n.e(12).then(n.bind(null,314)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,l=t.getTTFB;n(e),i(e),r(e),a(e),l(e)}))};n(124);l.a.render(r.a.createElement(o.a,null,r.a.createElement(x,null)),document.getElementById("root")),L()},64:function(e,t,n){"use strict";n.d(t,"a",(function(){return $}));var i=n(0),r=n(3),a=n(24),l=n(4),u=(n(50),n(1)),c=n(15),o=n.n(c);o.a.init({appId:"YB0lRc7ESEXMlXQ52KJI01ST-gzGzoHsz",appKey:"46LYhshmG2oFKUNKjcLVx8A5",serverURL:"https://yb0lrc7e.lc-cn-n1-shared.com"});var s,f,b,m,p,h,g,j,O,d,w,v,y,E,U,z,x,L,F,I,P,C,S,N,k,B,M,R,K,T,q=function(e,t){var n=new o.a.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){return e(t)}),(function(e){return t(e)}))}))},A=function(e,t){return new Promise((function(n,i){c.User.logIn(e,t).then((function(e){return n(e)}),(function(e){return i(e)}))}))},J=function(){c.User.logOut()},D=function(){return c.User.current()},G=function(e,t){var n=new o.a.Object("Image"),i=new o.a.File(t,e);return n.set("owner",o.a.User.current()),n.set("url",i),n.set("filename",t),new Promise((function(e,t){n.save().then((function(t){e(t)}),(function(e){t(e)}))}))},H=function(e){var t=e.page,n=void 0===t?0:t,i=e.limit,r=void 0===i?10:i,a=new o.a.Query("Image");return a.include("owner"),a.equalTo("owner",o.a.User.current()),a.limit(r),a.skip(n*r),new Promise((function(e,t){a.find().then((function(t){e(t)})).catch((function(e){t(e)}))}))},Q=new(s=function e(){Object(a.a)(this,e),Object(r.a)(this,"currentUser",f,this),Object(r.a)(this,"pullUser",b,this),Object(r.a)(this,"resetUser",m,this),Object(u.l)(this)},f=Object(l.a)(s.prototype,"currentUser",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=Object(l.a)(s.prototype,"pullUser",[u.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.currentUser=W.getCurrentUser()}}}),m=Object(l.a)(s.prototype,"resetUser",[u.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.currentUser=null}}}),s),X=new(p=function e(){Object(a.a)(this,e),Object(r.a)(this,"file",h,this),Object(r.a)(this,"serverFile",g,this),Object(r.a)(this,"filename",j,this),Object(r.a)(this,"isUploading",O,this),Object(r.a)(this,"setFile",d,this),Object(r.a)(this,"setFileName",w,this),Object(r.a)(this,"addImage",v,this),Object(r.a)(this,"resetImage",y,this),Object(u.l)(this)},h=Object(l.a)(p.prototype,"file",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=Object(l.a)(p.prototype,"serverFile",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=Object(l.a)(p.prototype,"filename",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),O=Object(l.a)(p.prototype,"isUploading",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=Object(l.a)(p.prototype,"setFile",[u.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.file=t}}}),w=Object(l.a)(p.prototype,"setFileName",[u.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.filename=t}}}),v=Object(l.a)(p.prototype,"addImage",[u.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){return e.isUploading=!0,e.serverFile=null,new Promise((function(t,n){G(e.file,e.filename).then((function(n){e.serverFile=n,t(n)})).catch((function(e){n(e)})).finally((function(){e.isUploading=!1}))}))}}}),y=Object(l.a)(p.prototype,"resetImage",[u.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.file=null,e.serverFile=null,e.filename="",e.isUploading=!1}}}),p),Y=n(128),V=new(E=function e(){Object(a.a)(this,e),Object(r.a)(this,"page",U,this),Object(r.a)(this,"list",z,this),Object(r.a)(this,"isLoading",x,this),Object(r.a)(this,"hasMore",L,this),this.limit=10,Object(r.a)(this,"appendImage",F,this),Object(r.a)(this,"queryImage",I,this),Object(r.a)(this,"resetList",P,this),Object(u.l)(this)},U=Object(l.a)(E.prototype,"page",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),z=Object(l.a)(E.prototype,"list",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=Object(l.a)(E.prototype,"isLoading",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=Object(l.a)(E.prototype,"hasMore",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),F=Object(l.a)(E.prototype,"appendImage",[u.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.list=e.list.concat(t)}}}),I=Object(l.a)(E.prototype,"queryImage",[u.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.isLoading=!0,H({page:e.page,limit:e.limit}).then((function(t){e.page++,e.appendImage(t),t.length<e.limit&&(e.hasMore=!1)})).catch((function(e){Y.b.error("\u52a0\u8f7d\u6570\u636e\u5931\u8d25\uff01")})).finally((function(){e.isLoading=!1}))}}}),P=Object(l.a)(E.prototype,"resetList",[u.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.page=0,e.list=[],e.isLoading=!1,e.hasMore=!0}}}),E),W=new(C=function e(){Object(a.a)(this,e),Object(r.a)(this,"isLogin",S,this),Object(r.a)(this,"values",N,this),Object(r.a)(this,"setUsername",k,this),Object(r.a)(this,"setPassword",B,this),Object(r.a)(this,"login",M,this),Object(r.a)(this,"register",R,this),Object(r.a)(this,"logout",K,this),Object(r.a)(this,"getCurrentUser",T,this),Object(u.l)(this)},S=Object(l.a)(C.prototype,"isLogin",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),N=Object(l.a)(C.prototype,"values",[u.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"",password:""}}}),k=Object(l.a)(C.prototype,"setUsername",[u.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.values.username=t}}}),B=Object(l.a)(C.prototype,"setPassword",[u.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.values.password=t}}}),M=Object(l.a)(C.prototype,"login",[u.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){return new Promise((function(t,n){A(e.values.username,e.values.password).then((function(n){Q.pullUser(),e.isLogin=!0,t(n)})).catch((function(t){Q.resetUser(),e.isLogin=!1,n(t)}))}))}}}),R=Object(l.a)(C.prototype,"register",[u.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){return new Promise((function(t,n){q(e.values.username,e.values.password).then((function(n){Q.pullUser(),e.isLogin=!0,t(n)})).catch((function(t){Q.resetUser(),e.isLogin=!1,n(t)}))}))}}}),K=Object(l.a)(C.prototype,"logout",[u.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){Q.resetUser(),V.resetList(),e.isLogin=!1,X.resetImage(),J()}}}),T=Object(l.a)(C.prototype,"getCurrentUser",[u.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){return D()}}}),C),Z=Object(i.createContext)({AuthStore:W,UserStore:Q,ImageStore:X,HistoryStore:V}),$=function(){return Object(i.useContext)(Z)}},99:function(e,t,n){}},[[125,3,4]]]);
//# sourceMappingURL=main.d9b966cc.chunk.js.map